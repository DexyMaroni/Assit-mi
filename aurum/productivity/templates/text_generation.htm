{% extends "base.html" %}

{% block content %}
<!-- text_generation.html -->
<h1>Generate Text from Prompt</h1>
<form id="text-generation-form" method="post">
    {% csrf_token %}
    <textarea name="prompt" placeholder="Enter your prompt here..." rows="5" cols="40"></textarea><br>
    <label for="max_tokens">Max Tokens:</label>
    <input type="number" name="max_tokens" value="200"><br>
    <label for="temperature">Temperature:</label>
    <input type="number" step="0.1" name="temperature" value="0.7"><br>
    <button type="submit">Generate</button>
</form>
<div id="response"></div>

<script>
    document.getElementById("text-generation-form").addEventListener("submit", function(event) {
        event.preventDefault();
        const formData = new FormData(this);
        fetch("{% url 'text_generation_view' %}", {
            method: "POST",
            headers: {
                "X-CSRFToken": "{{ csrf_token }}",
            },
            body: formData,
        })
        .then(response => response.json())
        .then(data => {
            document.getElementById("response").innerText = data.response;
        });
    });
</script>

{% endif %}
{% endblock %}
